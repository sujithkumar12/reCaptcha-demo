<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>

    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script src="https://cdn.emailjs.com/sdk/2.3.2/email.min.js"></script>
    <script>
      (function () {
        emailjs.init("Pk1GKHENXJohJlvAU");
      })();
    </script>
  </head>
  <body>
    <div class="container">
      <!-- <form onsubmit="sendEmail(); reset(); return false">
        <h3>Get In Touch</h3>
        <input type="text" id="name" placeholder="Your Name *" required />
        <input type="email" id="email" placeholder="Your Email *" required />
        <input
          type="number"
          id="phone"
          placeholder="Your Phone Number *"
          required
        />
        <textarea id="message" rows="4" placeholder="Message"></textarea>
        <button type="submit">Send Message</button>
      </form> -->
      <form id="myForm">
        <input type="text" id="name" placeholder="Your Name" required />
        <input
          type="number"
          id="contact"
          placeholder="Your phone number"
          required
        />
        <input type="email" id="email" placeholder="Your Email" required />
        <textarea
          id="msg"
          cols="30"
          rows="10"
          placeholder="Your Message"
          required
        ></textarea>
        <div
          class="g-recaptcha"
          data-sitekey="6LcY27AkAAAAAJx5A3S26j6Kk6BZKaGifIT3vSFs"
        ></div>
        <button type="submit">Send</button>
      </form>

      <!-- <button onclick="sendEmail()">send</button> -->

      <!-- <form>
        
        <button type="submit">Submit</button>
      </form> -->
    </div>

    <!-- <script src="https://smtpjs.com/v3/smtp.js"></script> -->
    <script>
      // Get a reference to the form element
      var form = document.getElementById("myForm");

      // Attach an event listener to the form's submit event
      form.addEventListener("submit", function (event) {
        // Prevent the default form submission behavior
        event.preventDefault();

        // Get a reference to the reCAPTCHA widget's response value
        var recaptchaResponse = grecaptcha.getResponse();

        // Check if the user completed the reCAPTCHA challenge
        if (recaptchaResponse.length === 0) {
          alert("Please complete the reCAPTCHA challenge.");
          return false;
        }

        console.log("success");
        var name = document.getElementById("name").value;
        var email = document.getElementById("email").value;
        var message = document.getElementById("message").value;

        var templateParams = {
          from_name: name,
          to_name: "Purvi dry fruits",
          message: message,
          reply_to: email,
        };

        emailjs
          .send("service_jpvfkoi", "template_d6ol9vv", templateParams)
          .then(
            function (response) {
              console.log("SUCCESS!", response.status, response.text);
              alert("Your message has been sent.");
            },
            function (error) {
              console.log("FAILED...", error);
              alert(
                "There was an error sending your message. Please try again later."
              );
            }
          );

        // Send the form data and reCAPTCHA response to a server with AJAX
        // var xhr = new XMLHttpRequest();
        // xhr.open("POST", "https://example.com/submit-form.php");
        // xhr.setRequestHeader(
        //   "Content-Type",
        //   "application/x-www-form-urlencoded"
        // );
        // xhr.onload = function () {
        //   if (xhr.status === 200) {
        //     alert("Form submitted successfully.");
        //     // Optionally, redirect the user to a different page after the form is submitted
        //     window.location.href = "https://example.com/thank-you.html";
        //   } else {
        //     alert("Form submission failed.");
        //   }
        // };
        // xhr.send(
        //   "formData=" +
        //     JSON.stringify(new FormData(form)) +
        //     "&recaptchaResponse=" +
        //     recaptchaResponse
        // );
      });
      // function submitForm(form) {
      //   var response = grecaptcha.getResponse();
      //   if (response.length == 0) {
      //     // reCaptcha checkbox was not checked
      //     alert("Please complete the reCaptcha challenge");
      //     return false;
      //   } else {
      //     // reCaptcha checkbox was checked, submit the form
      //     form.preventDefault();
      //     console.log("success");
      //   }
      // }

      // function sendEmail(event) {
      //   event.preventDefault();

      //   const name = document.getElementById("name").value;
      //   const phone = document.getElementById("contact").value;
      //   const message = document.getElementById("msg").value;

      //   const emailBody = `<div>
      //                       <div style="justify-content: center; display: flex;">
      //                         <div style="border: 1px solid #a7a5a5; padding: 50px; border-radius: 10px;">
      //                           <h3 style="color: #007aff; font-size: 25px; text-align: center;margin: 10px 0">Customers Feedback</h3>
      //                           <p style="margin: 5px 0"><b>Name : </b>${name}</p>
      //                           <p style="margin: 5px 0"><b>Phone Number : </b>${phone}</p>
      //                           <p style="margin: 5px 0"><b>Message : </b>${message}</p>
      //                         </div>
      //                       </div>
      //                     </div>`;

      // Email.send({
      //   Host: "smtp.gmail.com",
      //   Username: "demoapp24478@gmail.com",
      //   Password: "xwhqfpcnecfeplsh",
      //   To: "demoapp24478@gmail.com",
      //   From: document.getElementById("email").value,
      //   Subject: "This is the subject",
      //   Body: emailBody,
      // })
      //   .then((message) => alert(message));

      // console.log(
      //   "Name : " +
      //     document.getElementById("name").value +
      //     "\n" +
      //     "Phone Number : " +
      //     document.getElementById("contact").value +
      //     "\n" +
      //     "Message : " +
      //     document.getElementById("msg").value
      // );
      // }
    </script>
    <script>
      // const request = require("request");

      // Verify the reCAPTCHA response
      // function verifyRecaptcha(req, res, next) {
      //   const { captcha } = req.body;
      //   if (!captcha) {
      //     return res
      //       .status(400)
      //       .json({ message: "reCAPTCHA response missing" });
      //   }
      //   const secretKey = "6LcY27AkAAAAABLCCOzCN3kUya7eLDtxSlITLvk_";
      //   const url = `https://www.google.com/recaptcha/api/siteverify?secret=${secretKey}&response=${captcha}`;
      //   request.post(url, (error, response, body) => {
      //     if (error) {
      //       return res
      //         .status(500)
      //         .json({ message: "Error verifying reCAPTCHA response" });
      //     }
      //     const result = JSON.parse(body);
      //     if (result.success) {
      //       // reCAPTCHA response is valid
      //       next();
      //     } else {
      //       // reCAPTCHA response is invalid
      //       return res
      //         .status(400)
      //         .json({ message: "Invalid reCAPTCHA response" });
      //     }
      //   });
      // }
    </script>
    <!-- <script>
      function sendEmail() {
        Email.send({
          //   Host: "smtp.elasticemail.com",
          SecureToken: "4b2f676c-5ee9-486a-9486-c9141ab24b4b",
          //   Username: "sujith@accelerlabsolutions.com",
          //   Password: "SujithKAcceSolPvtMdb#626",
          To: "sujith@accelerlabsolutions.com",
          From: document.getElementById("email").value,
          Subject: "This is the subject",
          Body: "And this is the body",
        }).then((message) => alert(message));
      }
    </script> -->

    <!-- <script>
      function sendEmail() {
        Email.send({
          Host : "smtp.elasticemail.com",
          // SecureToken: "4b2f676c-5ee9-486a-9486-c9141ab24b4b",
          To: "sujith@accelerlabsolutions.com",
          From: "akshay@accelerlabsolutions.com",
          Username: "sujith@accelerlabsolutions.com",
          Password: "21037FFAA8C036F474F6FDD6FE38CCE76090",
          Subject: "Email subject",
          Body: "Email body",
        }).then((message) => alert(message));
      }
    </script> -->
  </body>
</html>
